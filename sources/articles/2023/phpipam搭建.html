<!DOCTYPE html>
<html>

<head>
    <title>Debian PostgreSQL安装配置</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs/themes/prism.css" />
    <link rel="stylesheet" href="../../css/home_style.css">
    <link rel="stylesheet" href="../../css/index_style.css">
</head>

<body>
    <div class="container-fluid">
        <div class="row" id="head">
            <div class="col" id="logo">
                <a href="../home.html">
                    <img src="../../img/logo.png" alt="">
                    <span>陈可微</span>
                </a>
            </div>

            <div class="col" id="navigation">
                <a href="../archive.html">
                    <span>归档</span>
                </a>
                <a href="tags.html">
                    <span>标签</span>
                </a>
                <a href="">
                    <span>订阅</span>
                </a>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col">
                <p>Debian PostgreSQL安装配置</p>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <img src="../../img/logo.png" alt="">
                <span>陈可微</span>
                <span class="body_articles_tag"><a href="">[Debian PostgreSQL]</a></span>
            </div>
        </div>
    </div>
    <div class="container">
        <img src="" alt="">
    </div>
    <div class="container">
        <p><strong>切换为root用户</strong></p>

<pre><code class="language-bash"> sudo su
</code></pre>

<p><strong>更新APT包索引</strong></p>

<pre><code class="language-bash"> sudo apt update
</code></pre>

<p><strong>安装 PostgreSQL服务</strong></p>

<pre><code class="language-bash"> sudo apt install postgresql
</code></pre>

<p><strong>安装校验</strong></p>

<pre><code class="language-bash"> sudo -u postgres psql -c &quot;SELECT version();&quot;
</code></pre>

<p><strong>默认情况下PostgreSQL服务器仅在本地监听127.0.0.1:5432
如果需要远程连接PostgreSQL服务器，则需要将服务器设置为公网IP上监听，并编辑配置文件</strong></p>

<p><strong>配置文件路径</strong></p>

<pre><code class="language-bash"> vi /etc/postgresql/13/main/postgresql.conf
</code></pre>

<p><strong>修改如下内容</strong></p>

<pre><code class="language-bash">- CONECTIONS AND AUTHENTICATION
listen_addresses =  ’*’  #what IP address(es) to listen on;
</code></pre>

<p><strong>保存文件并重启PostgreSQL</strong></p>

<pre><code class="language-bash">sudo service postgresql restart
</code></pre>

<p><strong>使用ss验证更改</strong></p>

<pre><code class="language-bash"> ss -nlt | grep 5432
LISTEN 0  128   0.0.0.0:5432   0.0.0.0:*
LISTEN 0  128    [::]:5432    [::]:*
</code></pre>

<p><strong>编辑pg_hba.conf文件使其接受远程登录</strong></p>

<pre><code class="language-bash"> vi /etc/postgresql/13/main/pg_hba.conf
</code></pre>

<p><strong>找到#IPv4 local connections插入命令</strong></p>

<pre><code class="language-bash"> host  all  all  0.0.0.0/0  md5
</code></pre>

<p><strong>切换Postgres用户</strong></p>

<pre><code class="language-bash"> su postgres
</code></pre>

<p><strong>链接数据库</strong></p>

<pre><code class="language-bash"> psql
</code></pre>

<p><strong>修改postersql默认密码</strong></p>

<pre><code class="language-bash"> \password postgres 根据命令提示输入密码
</code></pre>

<p><strong>创建数据库用户</strong></p>

<pre><code class="language-bash"> CREATE USER zhangsan WITH PASSWORD ‘zhangsan123;
</code></pre>

<p><strong>创建数据库</strong></p>

<pre><code class="language-bash"> CREATE DATABASE test_db OWNER zhangsan;
</code></pre>

    </div>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.2/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/prism.js"></script>
<script>
    window.onload = function () {
        Prism.highlightAll();
    }
</script>